Metadata-Version: 2.4
Name: plex-movies-cleaner
Version: 0.1.0
Summary: Herramientas para analizar bibliotecas de Plex y sugerir limpieza/normalizaci√≥n de metadatos.
Home-page: 
Author: F√©lix del Barrio
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: python-dotenv
Requires-Dist: requests
Requires-Dist: plexapi
Requires-Dist: googletrans==4.0.0-rc1
Requires-Dist: pandas
Requires-Dist: streamlit
Requires-Dist: altair
Requires-Dist: streamlit-aggrid
Provides-Extra: dev
Dynamic: author
Dynamic: description
Dynamic: description-content-type
Dynamic: license-file
Dynamic: provides-extra
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary


# üìò Plex Movies Cleaner ‚Äî Analizador Inteligente de Pel√≠culas para Plex

Este proyecto analiza autom√°ticamente tus bibliotecas Plex, consulta IMDb y Rotten Tomatoes mediante OMDb, clasifica pel√≠culas y genera reportes y dashboards interactivos.  
Ahora incorpora **instalaci√≥n editable mediante `setup.py`** y un flujo m√°s profesional de dependencias.

---

# üìÑ √çndice

- Caracter√≠sticas
- Requisitos
- Instalaci√≥n (nuevo sistema con setup.py)
- Instalaci√≥n cl√°sica (requirements.txt)
- Configuraci√≥n del `.env`
- Ejecutar el analizador
- Dashboard Streamlit
- Cache de OMDb
- Manejo del rate limit
- Estructura de CSV
- Borrado seguro
- Mejoras futuras

---

# ‚öôÔ∏è Caracter√≠sticas principales

- Conexi√≥n a Plex
- Obtenci√≥n de ratings IMDb + RT mediante OMDb
- Cache local persistente (`omdb_cache.json`)
- Clasificaci√≥n autom√°tica: KEEP / MAYBE / DELETE / UNKNOWN
- Generaci√≥n de:
  - `report_all.csv`
  - `report_filtered.csv`
  - `report_filtered.html`
- Dashboard gr√°fico en Streamlit
- Borrado seguro de archivos desde interfaz
- Nuevo: instalaci√≥n editable con:

```
pip install -e .
```

---

# üß© Requisitos

- Python 3.9+
- Servidor Plex accesible
- API Key de OMDb
- Token de Plex
- macOS / Linux / Raspberry Pi OS

---

# üõ† Instalaci√≥n ‚Äî NUEVO SISTEMA RECOMENDADO

El proyecto ahora es instalable como paquete Python.

### 1. Crear un entorno virtual

```
python3 -m venv venv
source venv/bin/activate
```

### 2. Instalar el proyecto en modo editable

```
pip install -e .
```

Esto instalar√° autom√°ticamente todas las dependencias declaradas en `setup.py`.

---

# üß™ Instalaci√≥n cl√°sica mediante `requirements.txt`

Si prefieres el flujo tradicional:

```
pip install -r requirements.txt
```

Internamente esto ejecuta:

```
pip install -e .[dev]
```

---

# üîë Token de Plex

Obt√©n tu token en:

1. https://app.plex.tv/desktop  
2. Abre tu servidor  
3. F12 ‚Üí pesta√±a Network  
4. Busca `X-Plex-Token`

---

# ‚öôÔ∏è Archivo `.env`

Ejemplo:

```
PLEX_BASEURL=http://192.168.1.10:32400
PLEX_TOKEN=TU_TOKEN
OMDB_API_KEY=TU_API_KEY
EXCLUDE_LIBRARIES=Series TV, M√∫sica
OUTPUT_PREFIX=report
IMDB_KEEP_MIN_RATING=7.0
IMDB_KEEP_MIN_RATING_WITH_RT=6.5
RT_KEEP_MIN_SCORE=75
IMDB_KEEP_MIN_VOTES=50000
IMDB_DELETE_MAX_RATING=6.0
RT_DELETE_MAX_SCORE=50
DELETE_DRY_RUN=true
DELETE_REQUIRE_CONFIRM=true
```

---

# ‚ñ∂Ô∏è Ejecutar el analizador

```
python analiza_plex.py
```

Genera autom√°ticamente:

- `report_all.csv`
- `report_filtered.csv`
- `report_filtered.html`

---

# üìä Dashboard Streamlit

```
streamlit run dashboard.py
```

Acceder en navegador:

```
http://localhost:8501
```

Incluye:

- Filtros por biblioteca
- Ratings IMDb/RT
- Buscador
- Gr√°ficos comparativos
- Borrado seguro

---

# üíæ Cache `omdb_cache.json`

- Se reutilizan respuestas de OMDb
- Reduce llamadas y bloqueos
- Mejora tiempos en futuras ejecuciones

---

# üö® Rate-limit de OMDb

Si OMDb devuelve "Request limit reached":

1. Espera autom√°tica (por defecto 60s)
2. Reintento
3. Parada segura si persiste

---

# üìä Estructura de los CSV

`report_all.csv` contiene:

- library  
- title  
- year  
- imdb_rating  
- rt_score  
- imdb_votes  
- plex_rating  
- decision  
- reason  
- misidentified_hint  
- file  

`report_filtered.csv` contiene solo DELETE + MAYBE ordenadas de peor a menos mala.

---

# üßπ Borrado seguro

Incluye:

- DRY RUN  
- Confirmaci√≥n obligatoria (‚ÄúBORRAR‚Äù)  
- Log detallado  
- Protecci√≥n frente a errores

---

# ‚ú® Mejoras futuras

- Integraci√≥n con TMDb
- CLI dedicada
- Automatizaci√≥n programada

---

# üéâ ¬°Listo!

Tu sistema Plex Movies Cleaner ahora es:

‚úî instalable  
‚úî modular  
‚úî profesional  
‚úî r√°pido  
‚úî reproducible  

Para m√°s informaci√≥n puedes revisar README_ARCHITECTURE.md
